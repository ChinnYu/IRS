<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>QuizPage</title>
    <!-- Bootstrap core CSS-->
    <link href="./recourse/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom fonts for this template-->
    <link href="./recourse/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!-- Custom styles for this template-->
    <!-- //<link href="css/sb-admin.css" rel="stylesheet"> -->
    <link href="./recourse/css/but_style_Teacher.css" rel="stylesheet">
</head>

<body style="background-color:rgba(196, 179, 153, 0.643)" onload="CountDown(CountDownSec);">
    <div class="container-fluid">
        <div class="container">
            <div class="row justify-content-around">
                <div class="row justify-content-end" id="TimeCountDown" style="color:rgb(52, 58, 64); text-align:center">
                    <h1>
                        <span class="col-md">&nbsp;&nbsp;&nbsp;&nbsp;分&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;秒</span>
                    </h1>
                </div>
                <div style="text-align:right">
                    <button class="btn btn-primary btn-xs" style="border:1px solid #FFF" onclick="CountDownSec += 10;">延長&nbsp;10秒</button>
                    <button class="btn btn-primary btn-xs" style="border:1px solid #FFF" onclick="CountDownSec += 30;">延長&nbsp;30秒</button>
                    <button class="btn btn-primary btn-xs" style="border:1px solid #FFF" onclick="CountDownSec  =  0;endquiz()">結束&nbsp;測試</button>
                </div>
            </div>
        </div>
        <div class="row justify-content-around">
            <div align="center" style="text-align:center; width:90%; height:25%;">
                <div class="card">
                    <div class="card-header" role="tab" id="headingOne">
                        <h5 class="mb-0">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                Question
                            </a>
                        </h5>
                    </div>
                    <div id="collapseOne" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
                        <div class="card-block">
                            <font size="6" id="question_show"></font>
                        </div>
                    </div>
                </div>
            </div>
            <div style="width:100%; height:20px"></div>
            <div class="row justify-content-around" style="width:100%; height:70%;">
                <div class="col-md-3">
                    <div class="box1" id="a" style="font-size:25px;text-align:center;"></div>
                </div>
                <div class="col-md-3">
                    <div class="box2" id="b" style="font-size:25px;text-align:center;"></div>
                </div>
                <div class="col-md-3">
                    <div class="box3" id="c" style="font-size:25px;text-align:center;"></div>
                </div>
                <div class="col-md-3">
                    <div class="box4" id="d" style="font-size:25px;text-align:center;"></div>
                </div>
            </div>
            <!-- <div class="col-md-12">
                <button type="button" class="btn btn-dark" id="finish_butt">Success</button>
            </div> -->
            <!--  <div class="col-md-12">
                <div class="container" id='tt'>
                    <button class="box1" id="a" style="font-size:20px;"></button>
                    <button class="box2" id="b" style="font-size:20px;"></button>
                </div>
            </div>
            <div class="col-md-12">
                <div class="container " id="tt">
                    <button class="box3" id="c" style="font-size:20px;"></button>
                    <button class="box4" id="d" style="font-size:20px;"></button>
                </div>
            </div> -->
        </div>
    </div>


    <!-- Bootstrap core JavaScript-->
    <script src="./recourse/vendor/jquery/jquery.min.js"></script>
    <script src="./recourse/vendor/popper/popper.min.js"></script>
    <script src="./recourse/vendor/bootstrap/js/bootstrap.min.js"></script>
    <!-- Core plugin JavaScript-->
    <script src="./recourse/vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="./recourse/vendor/pannel.js"></script>
    <!-- Get info-->
    <script text="text/Javascript">
        $.ajax({
            type: "POST",
            url: "startquiz/getQuizinfo",
            dataType: "json",
            data: {},
            success: function (res) {
                if (res) {
                    alert(res);
                    document.getElementById('question_show').innerHTML = res[0];
                    document.getElementById('a').innerHTML = res[1];
                    document.getElementById('b').innerHTML = res[2];
                    document.getElementById('c').innerHTML = res[3];
                    document.getElementById('d').innerHTML = res[4];
                }
            },
            error: function (jqXHR) {
                alert("發生錯誤: " + jqXHR.status);
            }
        });
        $("#finish_butt").click(function () {

            $.ajax({
                type: "POST",
                url: "startquiz/finishaction",
                dataType: "json",
                data: {},
                success: function (res) {
                    if (res) {
                        alert(res);
                    }
                },
                error: function (jqXHR) {
                    alert("發生錯誤: " + jqXHR.status);
                }
            });

        });
    </script>
    <!--TimeCountDown-->
    <script>
        var CountDownSec = 3600;
        var t;
        $.ajax({
            type: "POST",
            url: "startquiz/getQuizinfo",
            dataType: "json",
            data: {},
            success: function (res) {
                if (res) {
                    CountDownSec = res[6] * 60 - 1;
                }
            },
            error: function (jqXHR) {
                alert("發生錯誤: " + jqXHR.status);
            }
        });
        function CountDown(CountDownTime) {
            var minutes = Math.floor((CountDownSec % (60 * 60)) / 60);
            var seconds = Math.floor((CountDownSec % 60));

            // Output the result in an element with id="demo"
            document.getElementById("TimeCountDown").innerHTML =
                '<h1><span class="col-md">' + minutes + '</span></h1>' +
                '<h1><span class="col-md">' + " mins " + '</span></h1>' +
                '<h1><span class="col-md">' + seconds + '</span></h1>' +
                '<h1><span class="col-md">' + " secs  " + '</span></h1>';
            CountDownSec = CountDownSec - 1;
            t = setTimeout("CountDown()", 1000);
            if (CountDownSec < 0) {
                clearTimeout(t);
				
				$.ajax({
				type:'POST',
				url: "startquiz/endquiz",
				data:{}
				});
                window.location.href = './quizforteacherview';
            }
        }
		function endquiz() {
		$.ajax({
				type:'POST',
				url: "startquiz/endquiz",
				data:{}
				});
		window.location.href = './quizforteacherview';
		}
		
    </script>
</body>

</html>